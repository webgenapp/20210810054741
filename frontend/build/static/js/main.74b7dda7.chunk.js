(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{80:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),i=n(45),a=n.n(i),s=n(46),u="csrf-token",o="CSRF-Token";function j(e){var t;return null===(t=document.cookie.split("; ").find((function(t){return(null===t||void 0===t?void 0:t.split("=")[0])===e})))||void 0===t?void 0:t.split("=")[1]}var b=n.n(s).a.create({headers:[{name:o,value:j(u)}].reduce((function(e,t){return t.value&&(e[t.name]=t.value),e}),{})}),d=b,l=n(28),f=n(84),O=n(4),h=n(0);var v=function(e){var t=e.coffee,n=e.onSubmit,c={flavour:t?t.flavour:"",surname:t?t.surname:"",type:t?t.type:""};return Object(h.jsx)(O.c,{initialValues:c,validate:function(){return{}},onSubmit:n,children:function(e){var t=e.isSubmitting;return Object(h.jsxs)(O.b,{children:[Object(h.jsx)(O.a,{type:"text",name:"flavour",placeholder:"Flavour"}),Object(h.jsx)(O.a,{type:"text",name:"surname",placeholder:"Surname"}),Object(h.jsx)(O.a,{type:"text",name:"type",placeholder:"Type"}),Object(h.jsx)("button",{type:"submit",disabled:t,children:"Submit"})]})}})},p=n(8);var x=function(){var e=Object(l.b)(),t=Object(p.f)(),n=Object(f.a)((function(e){return d.post("/api/v1/coffees",e)}),{onSuccess:function(){e.invalidateQueries("coffees")}});return Object(h.jsx)(v,{onSubmit:function(e,c){var r=c.setSubmitting;n.mutate(e),null===r||void 0===r||r(!1),t.push("/coffees")}})},m=n(83);function g(e){var t=e.coffee,n=e.handleEdit,c=e.handleDelete,r=e.handleDetail;return Object(h.jsxs)(h.Fragment,{children:[t.flavour,Object(h.jsx)("br",{}),Object(h.jsx)("button",{type:"button",onClick:function(){return r(t)},children:"detail"}),Object(h.jsx)("button",{type:"button",onClick:function(){return n(t)},children:"edit"}),Object(h.jsx)("button",{type:"button",onClick:function(){return c(t)},children:"delete"})]})}var S=function(){var e,t,n=Object(p.f)(),c=Object(l.b)(),r=Object(m.a)("coffees",(function(){return d.get("/api/v1/coffees").then((function(e){return e.data}))})),i=Object(f.a)((function(e){var t=e.id;return d.delete("/api/v1/coffees/".concat(t))}),{onSuccess:function(){c.invalidateQueries("coffees")}}),a=function(e){var t=e.id;n.push("/coffees/update/".concat(t))},s=function(e){var t=e.id;i.mutate({id:t})},u=function(e){var t=e.id;n.push("/coffees/detail/".concat(t))};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("p",{children:[null===(e=r.data)||void 0===e?void 0:e.length," coffees"]}),Object(h.jsx)("ul",{children:null===(t=r.data)||void 0===t?void 0:t.map((function(e){return Object(h.jsx)("li",{children:Object(h.jsx)(g,{coffee:e,handleDelete:s,handleEdit:a,handleDetail:u})},e.id)}))})]})};var y=function(){var e=Object(p.g)().id,t=Object(m.a)(["coffees",e],(function(){return d.get("/api/v1/coffees/".concat(e)).then((function(e){return e.data}))})),n=t.data;if(t.isLoading)return Object(h.jsx)("div",{children:"Loading..."});var c=n;return Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{children:c.flavour}),Object(h.jsx)("br",{}),Object(h.jsx)("label",{children:c.surname}),Object(h.jsx)("br",{}),Object(h.jsx)("label",{children:c.type}),Object(h.jsx)("br",{})]})};var w=function(){var e=Object(p.g)().id,t=Object(l.b)(),n=Object(p.f)(),c=Object(m.a)(["coffees",e],(function(){return d.get("/api/v1/coffees/".concat(e)).then((function(e){return e.data}))})),r=c.data,i=c.isLoading,a=Object(f.a)((function(t){return d.put("/api/v1/coffees/".concat(e),t).then((function(e){return e.data}))}),{onSuccess:function(){t.invalidateQueries("coffees")}});if(i)return Object(h.jsx)("div",{children:"Loading..."});var s=r;return Object(h.jsx)(v,{coffee:s,onSubmit:function(e,t){var c=t.setSubmitting;a.mutate(e),null===c||void 0===c||c(!1),n.push("/coffees")}})};var C=function(e){var t=e.fruit,n=e.onSubmit,c={amount:t?t.amount:"",sugar:t?t.sugar:"",fresh:t?t.fresh:""};return Object(h.jsx)(O.c,{initialValues:c,validate:function(){return{}},onSubmit:n,children:function(e){var t=e.isSubmitting;return Object(h.jsxs)(O.b,{children:[Object(h.jsx)(O.a,{type:"text",name:"amount",placeholder:"Amount"}),Object(h.jsx)(O.a,{type:"text",name:"sugar",placeholder:"Sugar"}),Object(h.jsx)(O.a,{type:"text",name:"fresh",placeholder:"Fresh"}),Object(h.jsx)("button",{type:"submit",disabled:t,children:"Submit"})]})}})};var k=function(){var e=Object(l.b)(),t=Object(p.f)(),n=Object(f.a)((function(e){return d.post("/api/v1/fruits",e)}),{onSuccess:function(){e.invalidateQueries("fruits")}});return Object(h.jsx)(C,{onSubmit:function(e,c){var r=c.setSubmitting;n.mutate(e),null===r||void 0===r||r(!1),t.push("/fruits")}})};function L(e){var t=e.fruit,n=e.handleEdit,c=e.handleDelete,r=e.handleDetail;return Object(h.jsxs)(h.Fragment,{children:[t.amount,Object(h.jsx)("br",{}),Object(h.jsx)("button",{type:"button",onClick:function(){return r(t)},children:"detail"}),Object(h.jsx)("button",{type:"button",onClick:function(){return n(t)},children:"edit"}),Object(h.jsx)("button",{type:"button",onClick:function(){return c(t)},children:"delete"})]})}var D=function(){var e,t,n=Object(p.f)(),c=Object(l.b)(),r=Object(m.a)("fruits",(function(){return d.get("/api/v1/fruits").then((function(e){return e.data}))})),i=Object(f.a)((function(e){var t=e.id;return d.delete("/api/v1/fruits/".concat(t))}),{onSuccess:function(){c.invalidateQueries("fruits")}}),a=function(e){var t=e.id;n.push("/fruits/update/".concat(t))},s=function(e){var t=e.id;i.mutate({id:t})},u=function(e){var t=e.id;n.push("/fruits/detail/".concat(t))};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("p",{children:[null===(e=r.data)||void 0===e?void 0:e.length," fruits"]}),Object(h.jsx)("ul",{children:null===(t=r.data)||void 0===t?void 0:t.map((function(e){return Object(h.jsx)("li",{children:Object(h.jsx)(L,{fruit:e,handleDelete:s,handleEdit:a,handleDetail:u})},e.id)}))})]})};var F=function(){var e=Object(p.g)().id,t=Object(m.a)(["fruits",e],(function(){return d.get("/api/v1/fruits/".concat(e)).then((function(e){return e.data}))})),n=t.data;if(t.isLoading)return Object(h.jsx)("div",{children:"Loading..."});var c=n;return Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{children:c.amount}),Object(h.jsx)("br",{}),Object(h.jsx)("label",{children:c.sugar}),Object(h.jsx)("br",{}),Object(h.jsx)("label",{children:c.fresh}),Object(h.jsx)("br",{})]})};var Q=function(){var e=Object(p.g)().id,t=Object(l.b)(),n=Object(p.f)(),c=Object(m.a)(["fruits",e],(function(){return d.get("/api/v1/fruits/".concat(e)).then((function(e){return e.data}))})),r=c.data,i=c.isLoading,a=Object(f.a)((function(t){return d.put("/api/v1/fruits/".concat(e),t).then((function(e){return e.data}))}),{onSuccess:function(){t.invalidateQueries("fruits")}});if(i)return Object(h.jsx)("div",{children:"Loading..."});var s=r;return Object(h.jsx)(C,{fruit:s,onSubmit:function(e,t){var c=t.setSubmitting;a.mutate(e),null===c||void 0===c||c(!1),n.push("/fruits")}})};var E=function(e){var t=e.icecream,n=e.onSubmit,c={flavour:t?t.flavour:"",quantity:t?t.quantity:""};return Object(h.jsx)(O.c,{initialValues:c,validate:function(){return{}},onSubmit:n,children:function(e){var t=e.isSubmitting;return Object(h.jsxs)(O.b,{children:[Object(h.jsx)(O.a,{type:"text",name:"flavour",placeholder:"Flavour"}),Object(h.jsx)(O.a,{type:"text",name:"quantity",placeholder:"Quantity"}),Object(h.jsx)("button",{type:"submit",disabled:t,children:"Submit"})]})}})};var H=function(){var e=Object(l.b)(),t=Object(p.f)(),n=Object(f.a)((function(e){return d.post("/api/v1/icecreams",e)}),{onSuccess:function(){e.invalidateQueries("icecreams")}});return Object(h.jsx)(E,{onSubmit:function(e,c){var r=c.setSubmitting;n.mutate(e),null===r||void 0===r||r(!1),t.push("/icecreams")}})};function N(e){var t=e.icecream,n=e.handleEdit,c=e.handleDelete,r=e.handleDetail;return Object(h.jsxs)(h.Fragment,{children:[t.flavour,Object(h.jsx)("br",{}),Object(h.jsx)("button",{type:"button",onClick:function(){return r(t)},children:"detail"}),Object(h.jsx)("button",{type:"button",onClick:function(){return n(t)},children:"edit"}),Object(h.jsx)("button",{type:"button",onClick:function(){return c(t)},children:"delete"})]})}var U=function(){var e,t,n=Object(p.f)(),c=Object(l.b)(),r=Object(m.a)("icecreams",(function(){return d.get("/api/v1/icecreams").then((function(e){return e.data}))})),i=Object(f.a)((function(e){var t=e.id;return d.delete("/api/v1/icecreams/".concat(t))}),{onSuccess:function(){c.invalidateQueries("icecreams")}}),a=function(e){var t=e.id;n.push("/icecreams/update/".concat(t))},s=function(e){var t=e.id;i.mutate({id:t})},u=function(e){var t=e.id;n.push("/icecreams/detail/".concat(t))};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("p",{children:[null===(e=r.data)||void 0===e?void 0:e.length," icecreams"]}),Object(h.jsx)("ul",{children:null===(t=r.data)||void 0===t?void 0:t.map((function(e){return Object(h.jsx)("li",{children:Object(h.jsx)(N,{icecream:e,handleDelete:s,handleEdit:a,handleDetail:u})},e.id)}))})]})};var V=function(){var e=Object(p.g)().id,t=Object(m.a)(["icecreams",e],(function(){return d.get("/api/v1/icecreams/".concat(e)).then((function(e){return e.data}))})),n=t.data;if(t.isLoading)return Object(h.jsx)("div",{children:"Loading..."});var c=n;return Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{children:c.flavour}),Object(h.jsx)("br",{}),Object(h.jsx)("label",{children:c.quantity}),Object(h.jsx)("br",{})]})};var R=function(){var e=Object(p.g)().id,t=Object(l.b)(),n=Object(p.f)(),c=Object(m.a)(["icecreams",e],(function(){return d.get("/api/v1/icecreams/".concat(e)).then((function(e){return e.data}))})),r=c.data,i=c.isLoading,a=Object(f.a)((function(t){return d.put("/api/v1/icecreams/".concat(e),t).then((function(e){return e.data}))}),{onSuccess:function(){t.invalidateQueries("icecreams")}});if(i)return Object(h.jsx)("div",{children:"Loading..."});var s=r;return Object(h.jsx)(E,{icecream:s,onSubmit:function(e,t){var c=t.setSubmitting;a.mutate(e),null===c||void 0===c||c(!1),n.push("/icecreams")}})};var q=function(e){var t=e.user,n=e.onSubmit,c={username:t?t.username:"",passwordHash:t?t.passwordHash:""};return Object(h.jsx)(O.c,{initialValues:c,validate:function(){return{}},onSubmit:n,children:function(e){var t=e.isSubmitting;return Object(h.jsxs)(O.b,{children:[Object(h.jsx)(O.a,{type:"text",name:"username",placeholder:"Username"}),Object(h.jsx)(O.a,{type:"text",name:"passwordHash",placeholder:"PasswordHash"}),Object(h.jsx)("button",{type:"submit",disabled:t,children:"Submit"})]})}})};var I=function(){var e=Object(l.b)(),t=Object(p.f)(),n=Object(f.a)((function(e){return d.post("/api/v1/users",e)}),{onSuccess:function(){e.invalidateQueries("users")}});return Object(h.jsx)(q,{onSubmit:function(e,c){var r=c.setSubmitting;n.mutate(e),null===r||void 0===r||r(!1),t.push("/users")}})};function P(e){var t=e.user,n=e.handleEdit,c=e.handleDelete,r=e.handleDetail;return Object(h.jsxs)(h.Fragment,{children:[t.username,Object(h.jsx)("br",{}),Object(h.jsx)("button",{type:"button",onClick:function(){return r(t)},children:"detail"}),Object(h.jsx)("button",{type:"button",onClick:function(){return n(t)},children:"edit"}),Object(h.jsx)("button",{type:"button",onClick:function(){return c(t)},children:"delete"})]})}var J=function(){var e,t,n=Object(p.f)(),c=Object(l.b)(),r=Object(m.a)("users",(function(){return d.get("/api/v1/users").then((function(e){return e.data}))})),i=Object(f.a)((function(e){var t=e.id;return d.delete("/api/v1/users/".concat(t))}),{onSuccess:function(){c.invalidateQueries("users")}}),a=function(e){var t=e.id;n.push("/users/update/".concat(t))},s=function(e){var t=e.id;i.mutate({id:t})},u=function(e){var t=e.id;n.push("/users/detail/".concat(t))};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("p",{children:[null===(e=r.data)||void 0===e?void 0:e.length," users"]}),Object(h.jsx)("ul",{children:null===(t=r.data)||void 0===t?void 0:t.map((function(e){return Object(h.jsx)("li",{children:Object(h.jsx)(P,{user:e,handleDelete:s,handleEdit:a,handleDetail:u})},e.id)}))})]})};var T=function(){var e=Object(p.g)().id,t=Object(m.a)(["users",e],(function(){return d.get("/api/v1/users/".concat(e)).then((function(e){return e.data}))})),n=t.data;if(t.isLoading)return Object(h.jsx)("div",{children:"Loading..."});var c=n;return Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{children:c.username}),Object(h.jsx)("br",{}),Object(h.jsx)("label",{children:c.passwordHash}),Object(h.jsx)("br",{})]})};var A=function(){var e=Object(p.g)().id,t=Object(l.b)(),n=Object(p.f)(),c=Object(m.a)(["users",e],(function(){return d.get("/api/v1/users/".concat(e)).then((function(e){return e.data}))})),r=c.data,i=c.isLoading,a=Object(f.a)((function(t){return d.put("/api/v1/users/".concat(e),t).then((function(e){return e.data}))}),{onSuccess:function(){t.invalidateQueries("users")}});if(i)return Object(h.jsx)("div",{children:"Loading..."});var s=r;return Object(h.jsx)(q,{user:s,onSubmit:function(e,t){var c=t.setSubmitting;a.mutate(e),null===c||void 0===c||c(!1),n.push("/users")}})},B=n(23),M=n.n(B),z=n(30),G=n(31);var K=function(){var e=Object(c.useState)(""),t=Object(G.a)(e,2),n=t[0],r=t[1],i=Object(p.f)(),a=Object(l.b)(),s=function(e,t){var n=t.setSubmitting;if(e.response&&e.response.data){var c=e.response.data.error;c&&r(c)}null===n||void 0===n||n(!1)},u=function(){var e=Object(z.a)(M.a.mark((function e(t,n){var c;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.setSubmitting,e.prev=1,e.next=4,d.post("/auth/login",t);case 4:return null===c||void 0===c||c(!1),e.next=7,a.invalidateQueries("user");case 7:i.push("/"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),s(e.t0,{setSubmitting:c});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(h.jsx)(O.c,{initialValues:{username:"",password:""},validate:function(){return{}},onSubmit:u,children:function(e){var t=e.isSubmitting;return Object(h.jsxs)(O.b,{children:[Object(h.jsx)(O.a,{type:"text",name:"username",placeholder:"Username"}),Object(h.jsx)(O.a,{type:"password",name:"password",placeholder:"Password"}),n&&Object(h.jsx)("div",{children:n}),Object(h.jsx)("button",{type:"submit",disabled:t,children:"Login"})]})}})};var W=function(){var e=Object(c.useState)(""),t=Object(G.a)(e,2),n=t[0],r=t[1],i=function(){var e=Object(z.a)(M.a.mark((function e(t,n){var c,i;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.setSubmitting,e.prev=1,e.next=4,d.post("/auth/register",t);case 4:null===c||void 0===c||c(!1),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),e.t0.response&&e.t0.response.data&&(i=e.t0.response.data.error)&&r(i),null===c||void 0===c||c(!1);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(h.jsx)(O.c,{initialValues:{username:"",email:"",password:"",passwordConfirm:""},validate:function(){return{}},onSubmit:i,children:function(e){var t=e.isSubmitting;return Object(h.jsxs)(O.b,{children:[Object(h.jsx)(O.a,{type:"text",name:"username",placeholder:"Username"}),Object(h.jsx)(O.a,{type:"text",name:"email",placeholder:"Email"}),Object(h.jsx)(O.a,{type:"password",name:"password",placeholder:"Password"}),Object(h.jsx)(O.a,{type:"password",name:"passwordConfirm",placeholder:"Confirm password"}),n&&Object(h.jsx)("div",{children:n}),Object(h.jsx)("button",{type:"submit",disabled:t,children:"Register"})]})}})},X=n(6);var Y=function(){return Object(m.a)("user",(function(){return d.get("/auth/me")}),{retry:!1}).data,Object(c.useEffect)((function(){j(u)||b.get("/auth/csrf").then((function(){b.defaults.headers[o]=j(u)})).catch((function(e){console.warn("Received error while fetching CSRF token :",e)}))}),[]),Object(h.jsxs)(X.a,{children:[Object(h.jsx)("nav",{children:Object(h.jsxs)("ul",{className:"flex",children:[Object(h.jsxs)("li",{children:[Object(h.jsx)(X.b,{to:"/",children:"Home"}),Object(h.jsx)("br",{})]}),Object(h.jsxs)("li",{className:"ml-10",children:[Object(h.jsx)(X.b,{to:"/login",children:"Login"}),Object(h.jsx)("br",{}),Object(h.jsx)(X.b,{to:"/register",children:"Register"}),Object(h.jsx)("br",{})]}),Object(h.jsxs)("li",{className:"ml-10",children:[Object(h.jsx)(X.b,{to:"/coffees",children:"Coffees"}),Object(h.jsx)("br",{}),Object(h.jsx)(X.b,{to:"/coffees/create",children:"Create a Coffee"}),Object(h.jsx)("br",{})]}),Object(h.jsxs)("li",{className:"ml-10",children:[Object(h.jsx)(X.b,{to:"/fruits",children:"Fruits"}),Object(h.jsx)("br",{}),Object(h.jsx)(X.b,{to:"/fruits/create",children:"Create a Fruit"}),Object(h.jsx)("br",{})]}),Object(h.jsxs)("li",{className:"ml-10",children:[Object(h.jsx)(X.b,{to:"/icecreams",children:"Icecreams"}),Object(h.jsx)("br",{}),Object(h.jsx)(X.b,{to:"/icecreams/create",children:"Create a Icecream"}),Object(h.jsx)("br",{})]}),Object(h.jsxs)("li",{className:"ml-10",children:[Object(h.jsx)(X.b,{to:"/users",children:"Users"}),Object(h.jsx)("br",{}),Object(h.jsx)(X.b,{to:"/users/create",children:"Create a User"}),Object(h.jsx)("br",{})]})]})}),Object(h.jsxs)("main",{children:[Object(h.jsx)(p.a,{path:"/coffees",children:Object(h.jsx)("h1",{children:"Coffees"})}),Object(h.jsx)(p.a,{path:"/fruits",children:Object(h.jsx)("h1",{children:"Fruits"})}),Object(h.jsx)(p.a,{path:"/icecreams",children:Object(h.jsx)("h1",{children:"Icecreams"})}),Object(h.jsx)(p.a,{path:"/users",children:Object(h.jsx)("h1",{children:"Users"})}),Object(h.jsxs)(p.c,{children:[Object(h.jsx)(p.a,{path:"/coffees/create",component:x}),Object(h.jsx)(p.a,{path:"/coffees/update/:id",component:w}),Object(h.jsx)(p.a,{path:"/coffees/detail/:id",component:y}),Object(h.jsx)(p.a,{path:"/coffees",component:S}),",",Object(h.jsx)(p.a,{path:"/fruits/create",component:k}),Object(h.jsx)(p.a,{path:"/fruits/update/:id",component:Q}),Object(h.jsx)(p.a,{path:"/fruits/detail/:id",component:F}),Object(h.jsx)(p.a,{path:"/fruits",component:D}),",",Object(h.jsx)(p.a,{path:"/icecreams/create",component:H}),Object(h.jsx)(p.a,{path:"/icecreams/update/:id",component:R}),Object(h.jsx)(p.a,{path:"/icecreams/detail/:id",component:V}),Object(h.jsx)(p.a,{path:"/icecreams",component:U}),",",Object(h.jsx)(p.a,{path:"/users/create",component:I}),Object(h.jsx)(p.a,{path:"/users/update/:id",component:A}),Object(h.jsx)(p.a,{path:"/users/detail/:id",component:T}),Object(h.jsx)(p.a,{path:"/users",component:J}),Object(h.jsx)(p.a,{path:"/login",component:K}),Object(h.jsx)(p.a,{path:"/register",component:W})]})]})]})},Z=new(n(82).a);a.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(l.a,{client:Z,children:Object(h.jsx)(Y,{})})}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.74b7dda7.chunk.js.map